version: '3'
volumes:
    grafana-storage:
    prometheus-storage:
    alertmanager-storage:
services: 
    prometheus:
        image: prom/prometheus
        command: ["--config.file=/prometheus-data/prometheus.yml"]
        volumes: 
            - ./prometheus-data:/prometheus-data
            - prometheus-storage:/prometheus
        ports:
            - 9090:9090
    grafana:
        image: grafana/grafana
        volumes:
            - grafana-storage:/var/lib/grafana
        ports:
            - 3000:3000
        depends_on: 
            - prometheus
    alertmanager:
        image: quay.io/prometheus/alertmanager
        volumes:
            - alertmanager-storage:/alertmanager
        ports:
            - 9093:9093